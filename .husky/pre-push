echo "ğŸš€ Running pre-push CI validation..."
echo "âš ï¸  This hook will BLOCK pushes if any CI checks fail"
echo ""

# Run full CI validation
echo "ğŸ” Running comprehensive CI checks..."
pnpm ci:check

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ CI validation failed! Push blocked."
  echo ""
  echo "ğŸ’¡ To fix issues:"
  echo "   1. Run 'pnpm ci:check' to see all failures"
  echo "   2. Fix formatting: 'pnpm format'"
  echo "   3. Fix linting: 'pnpm lint:fix'"
  echo "   4. Fix types: Check TypeScript errors"
  echo "   5. Fix build: Resolve build issues"
  echo "   6. Run 'pnpm ci:check' again"
  echo ""
  echo "ğŸš« Push blocked until all CI checks pass"
  exit 1
fi

echo ""
echo "ğŸ‰ All CI checks passed! Push allowed."
echo "ğŸ’¡ Remember: AI agents MUST ask for explicit consent before committing"
